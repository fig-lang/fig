import server;

export fn main (request: char[]): char[] {
    let path: char[] = http_path(request);

    let headers: char[] = "Content-Type: text/html
Connection: Closed";

    if (cmp_string(path, "/")) {
        let file: char[] = read_file("./index.html");

        return new_response("200", "OK", headers, file);
    }

    let afile: char[] = read_file(add_string("./", path));

    return new_response("200", "OK", headers, afile);
}
